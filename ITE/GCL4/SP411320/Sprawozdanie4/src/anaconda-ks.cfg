# Generated by Anaconda 39.32.6
# Generated by pykickstart v3.48
#version=DEVEL
# Use graphical install
graphical

# Keyboard layouts
keyboard --vckeymap=pl --xlayouts='pl'
# System language
lang pl_PL.UTF-8

# Network information
network  --bootproto=dhcp --device=eth0 --ipv6=auto --activate
network  --bootproto=dhcp --device=eth2 --ipv6=auto

%packages
@^server-product-environment
@^minimal-environment # Minimal Install - '^' is used to denote a package group
@container-management # Container Management - for docker
%end

# Run the Setup Agent on first boot
firstboot --enable

# Run the Setup Agent on first boot
firstboot --enable

# Generated using Blivet version 3.8.1
ignoredisk --only-use=sda
autopart
# Partition clearing information
clearpart --all

# System timezone
timezone Europe/Warsaw --utc

# Root password
rootpw --iscrypted --allow-ssh $y$j9T$qxgidSl7K2OHZiO.jQyGc6qV$8SVZGRjHkxQzlYgE7mPsDGm03P/o6gypl7Pfg9NTU6D
user --groups=wheel,docker --name=user --password=$y$j9T$tb1/zFnPvwyyb4wPBAwbFlN3$Q.6zMLhdjo6xrr4wUCxzxLooDvNoWMORmI0zAhM5VK3 --iscrypted --gecos="user" # Create a user named user, belonging to the wheel and docker groups, with the password user (encrypted)

reboot

%post --erroronfail --log=/var/log/anaconda/post-install.log
systemctl enable docker

[Unit]
Description=Docker
Requires=docker.service
After=docker.service

[Service]
Type=oneshot
RemainAfterExit=yes
ExecStart=/usr/bin/dockerd pull pixel48/irssi
ExecStart=/usr/bin/dockerd run -d --name irssi -p 6667:6667 pixel48/irssi

[Install]
WantedBy=multi-user.target
EOF

systemctl daemon-reload
systemctl enable irssi-docker.service
systemctl start irssi-docker.service
%end
