- name: Ping all machines
  hosts: all
  tasks:
  - name: Ping machines
    ping:
    
- name: Copy inventory
  hosts: Endpoints
  tasks:
  - name: Copy
    copy:
      src: ~/repo/MDO2024_INO/INO/GCL1/MJ410315/Sprawozdanie4/inventory.ini
      dest: ~/copied_inventory/inventory.ini

  - name: Copy (again)
    copy:
      src: ~/repo/MDO2024_INO/INO/GCL1/MJ410315/Sprawozdanie4/inventory.ini
      dest: ~/copied_inventory/inventory.ini

- name: Update package
  hosts: Endpoints
  vars:
    ansible_become_pass: ansible # Password is ansible in this case
  tasks:
  - name: update
    become: yes
    apt:
      name: "*"
      state: latest
  
- name: Restart sshd and rngd
  hosts: Endpoints
  vars:
    ansible_become_pass: ansible
  tasks:
  - name: Restart sshd
    become: yes
    service:
      name: sshd
      state: restarted
      
  - name: Restart rngd
    become: yes
    service:
      name: rngd
      state: restarted